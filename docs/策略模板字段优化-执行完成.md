# ç­–ç•¥æ¨¡æ¿å­—æ®µä¼˜åŒ– - æ‰§è¡Œå®ŒæˆæŠ¥å‘Š

## âœ… æ‰§è¡Œæ‘˜è¦

**æ‰§è¡Œæ—¶é—´**: 2025-12-03  
**æ‰§è¡ŒçŠ¶æ€**: âœ… å®Œæˆ  
**å½±å“èŒƒå›´**: æ•°æ®åº“ã€åç«¯ã€å‰ç«¯

---

## ğŸ“‹ æ‰§è¡Œæ¸…å•

### 1. âœ… æ•°æ®åº“è¿ç§»
**æ–‡ä»¶**: `server/storage/data/migrations/optimize_strategy_template_fields.sql`

**å˜æ›´å†…å®¹**:
- âŒ åˆ é™¤å­—æ®µ: `leverage_min`, `leverage_max`, `margin_percent_min`, `margin_percent_max`
- âœ… æ–°å¢å­—æ®µ: `leverage` (int), `margin_percent` (decimal)
- âœ… æ•°æ®è¿ç§»: ä½¿ç”¨æ—§çš„ `leverage_min` ä½œä¸ºæ–°çš„ `leverage` å€¼
- âœ… å¤‡ä»½è¡¨: `hg_trading_strategy_template_backup_20251203`

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ

### 2. âœ… Go Entityæ›´æ–°
**æ–‡ä»¶**: `server/internal/model/entity/trading_strategy_template.go`

**å˜æ›´å†…å®¹**:
```go
// åˆ é™¤
LeverageMin              int
LeverageMax              int
MarginPercentMin         float64
MarginPercentMax         float64

// æ–°å¢
Leverage                 int
MarginPercent            float64
```

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ

### 3. âœ… å‰ç«¯æ˜¾ç¤ºæ›´æ–°
**æ–‡ä»¶**: `web/src/views/toogo/strategy/list.vue`

**å˜æ›´å†…å®¹**:
- ç­–ç•¥å¡ç‰‡æ˜¾ç¤º: `5-10x` â†’ `5x`
- ç­–ç•¥å¡ç‰‡æ˜¾ç¤º: `5-15%` â†’ `12%`
- è¡¨å•ç®€åŒ–: åˆ é™¤"æ¨èå€¼"å’Œ"èŒƒå›´"ï¼Œåªä¿ç•™å›ºå®šå€¼è¾“å…¥
- è¡¨å•æ•°æ®: åˆ é™¤ `leverageMin`, `leverageMax`, `marginPercentMin`, `marginPercentMax`

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ

### 4. âœ… åç«¯åˆå§‹åŒ–é€»è¾‘æ›´æ–°
**æ–‡ä»¶**: `server/internal/logic/toogo/strategy_group.go`

**å˜æ›´å†…å®¹**:
- å®šä¹‰12ç§ç­–ç•¥çš„å›ºå®šå‚æ•°ï¼ˆ3é£é™© Ã— 4å¸‚åœºï¼‰
- æ‰¹é‡åˆå§‹åŒ–æ—¶ä½¿ç”¨å›ºå®šå€¼è€ŒéåŒºé—´

**æ–°å‚æ•°è¡¨**:
| é£é™©åå¥½ | å¸‚åœºçŠ¶æ€ | æ æ† | ä¿è¯é‡‘% |
|---------|---------|------|---------|
| ä¿å®ˆ | è¶‹åŠ¿ | 3x | 8% |
| ä¿å®ˆ | éœ‡è¡ | 2x | 5% |
| ä¿å®ˆ | é«˜æ³¢åŠ¨ | 2x | 5% |
| ä¿å®ˆ | ä½æ³¢åŠ¨ | 5x | 10% |
| å¹³è¡¡ | è¶‹åŠ¿ | 5x | 12% |
| å¹³è¡¡ | éœ‡è¡ | 4x | 10% |
| å¹³è¡¡ | é«˜æ³¢åŠ¨ | 5x | 12% |
| å¹³è¡¡ | ä½æ³¢åŠ¨ | 8x | 15% |
| æ¿€è¿› | è¶‹åŠ¿ | 10x | 20% |
| æ¿€è¿› | éœ‡è¡ | 8x | 15% |
| æ¿€è¿› | é«˜æ³¢åŠ¨ | 10x | 20% |
| æ¿€è¿› | ä½æ³¢åŠ¨ | 15x | 25% |

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ

---

## ğŸ§ª æµ‹è¯•éªŒè¯æ­¥éª¤

### æµ‹è¯•1: æ•°æ®åº“éªŒè¯
```sql
-- æŸ¥çœ‹è¡¨ç»“æ„
DESC hg_trading_strategy_template;

-- éªŒè¯æ–°å­—æ®µå­˜åœ¨
SELECT id, strategy_name, leverage, margin_percent 
FROM hg_trading_strategy_template 
LIMIT 5;

-- éªŒè¯æ—§å­—æ®µå·²åˆ é™¤ï¼ˆåº”è¯¥æŠ¥é”™ï¼‰
SELECT leverage_min FROM hg_trading_strategy_template LIMIT 1;
```

**é¢„æœŸç»“æœ**:
- âœ… `leverage` å’Œ `margin_percent` å­—æ®µå­˜åœ¨
- âœ… `leverage_min` ç­‰å­—æ®µä¸å­˜åœ¨ï¼ˆæŠ¥é”™ï¼‰

### æµ‹è¯•2: åˆ›å»ºæ–°ç­–ç•¥ç»„
1. è¿›å…¥ï¼š**é‡åŒ–ç®¡ç† â†’ å®˜æ–¹ç­–ç•¥ç®¡ç†**
2. ç‚¹å‡»ï¼š**åˆ›å»ºå®˜æ–¹ç­–ç•¥ç»„**
3. å¡«å†™ä¿¡æ¯ï¼š
   - ç­–ç•¥ç»„åç§°: `æµ‹è¯•ç­–ç•¥ç»„ V1.0`
   - ç­–ç•¥ç»„æ ‡è¯†: `test_strategy_v1`
   - äº¤æ˜“æ‰€: `Bitget`
   - äº¤æ˜“å¯¹: `BTCUSDT`
4. ç‚¹å‡»ï¼š**åˆ›å»º**
5. ç‚¹å‡»ï¼š**åˆå§‹åŒ–**ï¼ˆç”Ÿæˆ12ç§ç­–ç•¥ï¼‰

**é¢„æœŸç»“æœ**:
- âœ… ç­–ç•¥ç»„åˆ›å»ºæˆåŠŸ
- âœ… åˆå§‹åŒ–ç”Ÿæˆ12ç§ç­–ç•¥
- âœ… æ¯ç§ç­–ç•¥æ˜¾ç¤ºå›ºå®šæ æ†å€¼ï¼ˆå¦‚ `5x`ï¼‰
- âœ… æ¯ç§ç­–ç•¥æ˜¾ç¤ºå›ºå®šä¿è¯é‡‘æ¯”ä¾‹ï¼ˆå¦‚ `12%`ï¼‰

### æµ‹è¯•3: æŸ¥çœ‹ç­–ç•¥åˆ—è¡¨
1. åœ¨ç­–ç•¥ç»„åˆ—è¡¨ç‚¹å‡»ï¼š**æŸ¥çœ‹ç­–ç•¥**
2. æŸ¥çœ‹ç­–ç•¥å¡ç‰‡æ˜¾ç¤º

**é¢„æœŸç»“æœ**:
- âœ… æ æ†æ˜¾ç¤ºä¸º: `5x`ï¼ˆä¸æ˜¯ `5-10x`ï¼‰
- âœ… ä¿è¯é‡‘æ˜¾ç¤ºä¸º: `12%`ï¼ˆä¸æ˜¯ `8-15%`ï¼‰

### æµ‹è¯•4: ç¼–è¾‘ç­–ç•¥
1. ç‚¹å‡»ä»»æ„ç­–ç•¥çš„ï¼š**ç¼–è¾‘**
2. æŸ¥çœ‹è¡¨å•å­—æ®µ

**é¢„æœŸç»“æœ**:
- âœ… åªæœ‰"æ æ†å€æ•°"å’Œ"ä¿è¯é‡‘æ¯”ä¾‹"ä¸¤ä¸ªå­—æ®µ
- âœ… æ²¡æœ‰"æœ€å°æ æ†"ã€"æœ€å¤§æ æ†"ç­‰å­—æ®µ
- âœ… å¯ä»¥æ­£å¸¸ä¿®æ”¹å¹¶ä¿å­˜

### æµ‹è¯•5: åº”ç”¨ç­–ç•¥åˆ°æœºå™¨äºº
1. è¿›å…¥ï¼š**é‡åŒ–äº¤æ˜“ â†’ æˆ‘çš„æœºå™¨äºº**
2. åˆ›å»ºæ–°æœºå™¨äººæˆ–ç¼–è¾‘ç°æœ‰æœºå™¨äºº
3. é€‰æ‹©ä½¿ç”¨æ–°åˆ›å»ºçš„ç­–ç•¥ç»„

**é¢„æœŸç»“æœ**:
- âœ… æœºå™¨äººå¯ä»¥æ­£å¸¸ä½¿ç”¨ç­–ç•¥
- âœ… æœºå™¨äººæ—¥å¿—æ˜¾ç¤ºå›ºå®šçš„æ æ†å’Œä¿è¯é‡‘å€¼

---

## ğŸ“Š æ•°æ®å¯¹æ¯”

### ä¼˜åŒ–å‰
```
ç­–ç•¥æ¨¡æ¿æ˜¾ç¤º:
æ æ†: 5-10x
ä¿è¯é‡‘: 8-15%

æ•°æ®åº“å­—æ®µ:
leverage_min: 5
leverage_max: 10
margin_percent_min: 8.00
margin_percent_max: 15.00
```

### ä¼˜åŒ–å
```
ç­–ç•¥æ¨¡æ¿æ˜¾ç¤º:
æ æ†: 5x
ä¿è¯é‡‘: 12%

æ•°æ®åº“å­—æ®µ:
leverage: 5
margin_percent: 12.00
```

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœéœ€è¦å›æ»šåˆ°æ—§ç‰ˆæœ¬ï¼š

```sql
-- 1. åˆ é™¤å½“å‰è¡¨
DROP TABLE hg_trading_strategy_template;

-- 2. æ¢å¤å¤‡ä»½è¡¨
RENAME TABLE hg_trading_strategy_template_backup_20251203 
TO hg_trading_strategy_template;

-- 3. é‡æ–°ç”ŸæˆGoä»£ç 
cd D:\go\src\hotgo_v2\server
gf gen dao

-- 4. æ¢å¤å‰ç«¯ä»£ç ï¼ˆä½¿ç”¨Gitï¼‰
cd D:\go\src\hotgo_v2\web
git checkout web/src/views/toogo/strategy/list.vue

-- 5. æ¢å¤åç«¯ä»£ç ï¼ˆä½¿ç”¨Gitï¼‰
cd D:\go\src\hotgo_v2\server
git checkout internal/logic/toogo/strategy_group.go
git checkout internal/model/entity/trading_strategy_template.go
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç°æœ‰æ•°æ®å¤„ç†
- âœ… æ—§æ•°æ®å·²è‡ªåŠ¨è¿ç§»ï¼ˆä½¿ç”¨ `leverage_min` ä½œä¸ºæ–°çš„ `leverage`ï¼‰
- âœ… å¤‡ä»½è¡¨å·²åˆ›å»ºï¼Œå¯éšæ—¶å›æ»š

### 2. APIå…¼å®¹æ€§
- âš ï¸ å‰ç«¯è¯·æ±‚å­—æ®µåå·²æ›´æ”¹
- âš ï¸ åç«¯å“åº”å­—æ®µåå·²æ›´æ”¹
- âœ… å‰åç«¯å·²åŒæ­¥æ›´æ–°

### 3. æ­£åœ¨è¿è¡Œçš„æœºå™¨äºº
- âš ï¸ éœ€è¦é‡å¯åç«¯æœåŠ¡ä»¥åŠ è½½æ–°çš„Entity
- âš ï¸ æ­£åœ¨è¿è¡Œçš„æœºå™¨äººå¯èƒ½éœ€è¦é‡æ–°åŠ è½½ç­–ç•¥

### 4. å‰ç«¯ç¼“å­˜
- âš ï¸ ç”¨æˆ·éœ€è¦å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl + Shift + Rï¼‰
- âš ï¸ æˆ–è€…é‡å¯å‰ç«¯å¼€å‘æœåŠ¡å™¨

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### ç«‹å³æ“ä½œ
1. âœ… **é‡å¯åç«¯æœåŠ¡**
   ```bash
   cd D:\go\src\hotgo_v2\server
   # åœæ­¢å½“å‰æœåŠ¡
   # é‡æ–°å¯åŠ¨
   go run main.go
   ```

2. âœ… **é‡å¯å‰ç«¯æœåŠ¡**
   ```bash
   cd D:\go\src\hotgo_v2\web
   # Ctrl + C åœæ­¢
   npm run dev
   ```

3. âœ… **åˆ·æ–°æµè§ˆå™¨**
   ```
   Ctrl + Shift + R (å¼ºåˆ¶åˆ·æ–°)
   ```

### éªŒè¯æµ‹è¯•
æŒ‰ç…§ä¸Šè¿°"æµ‹è¯•éªŒè¯æ­¥éª¤"é€é¡¹æµ‹è¯•

### ç›‘æ§è§‚å¯Ÿ
- è§‚å¯Ÿæœºå™¨äººè¿è¡Œæ—¥å¿—
- æ£€æŸ¥ç­–ç•¥å‚æ•°æ˜¯å¦æ­£ç¡®åº”ç”¨
- ç›‘æ§äº¤æ˜“æ‰§è¡Œæƒ…å†µ

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### æ•°æ®åº“
- âœ… `server/storage/data/migrations/optimize_strategy_template_fields.sql`

### åç«¯
- âœ… `server/internal/model/entity/trading_strategy_template.go`
- âœ… `server/internal/logic/toogo/strategy_group.go`

### å‰ç«¯
- âœ… `web/src/views/toogo/strategy/list.vue`

### æ–‡æ¡£
- âœ… `docs/ç­–ç•¥æ¨¡æ¿å­—æ®µä¼˜åŒ–æ–¹æ¡ˆ.md`
- âœ… `docs/ç­–ç•¥æ¨¡æ¿å­—æ®µä¼˜åŒ–-æ‰§è¡Œå®Œæˆ.md`

---

## âœ… ä¼˜åŒ–æ•ˆæœ

### ç”¨æˆ·ä½“éªŒ
- âœ… ç­–ç•¥å‚æ•°æ›´æ¸…æ™°æ˜ç¡®
- âœ… è¡¨å•æ›´ç®€æ´æ˜“ç”¨
- âœ… å‡å°‘ç”¨æˆ·å›°æƒ‘

### æ•°æ®ç»“æ„
- âœ… å­—æ®µæ›´ç®€æ´
- âœ… è¯­ä¹‰æ›´æ˜ç¡®
- âœ… æ˜“äºç†è§£å’Œç»´æŠ¤

### ç³»ç»Ÿæ€§èƒ½
- âœ… å‡å°‘å­—æ®µæ•°é‡
- âœ… ç®€åŒ–æŸ¥è¯¢é€»è¾‘
- âœ… æé«˜ä»£ç å¯è¯»æ€§

---

**æ‰§è¡Œäººå‘˜**: AI Assistant  
**æ‰§è¡Œæ—¶é—´**: 2025-12-03  
**çŠ¶æ€**: âœ… å®Œæˆ  
**éœ€è¦æ“ä½œ**: é‡å¯æœåŠ¡ + æµ‹è¯•éªŒè¯

















