# 清空预警记录方法

## 方法1：直接执行 SQL（最简单）

### 清空所有预警记录
```sql
TRUNCATE TABLE hg_trading_signal_log;
```

### 删除所有预警记录（保留自增ID）
```sql
DELETE FROM hg_trading_signal_log;
```

### 删除指定机器人的预警记录
```sql
DELETE FROM hg_trading_signal_log WHERE robot_id = ?;
-- 例如：DELETE FROM hg_trading_signal_log WHERE robot_id = 1;
```

### 只删除未执行的预警记录
```sql
DELETE FROM hg_trading_signal_log WHERE executed = 0;
```

### 删除指定时间之前的预警记录（例如：删除7天前的记录）
```sql
DELETE FROM hg_trading_signal_log WHERE created_at < DATE_SUB(NOW(), INTERVAL 7 DAY);
```

---

## 方法2：使用代码函数（已添加）

已在 `robot.go` 中添加了 `ClearSignalLogs` 函数：

```go
// ClearSignalLogs 清空预警记录
// robotId: 机器人ID，0表示清空所有机器人的预警记录
// keepExecuted: 是否保留已执行的记录（true=只删除未执行的，false=删除所有）
func (s *sToogoRobot) ClearSignalLogs(ctx context.Context, robotId int64, keepExecuted bool) error
```

### 使用示例

#### 清空所有预警记录
```go
ctx := context.Background()
err := service.ToogoRobot().ClearSignalLogs(ctx, 0, false)
if err != nil {
    log.Printf("清空失败: %v", err)
}
```

#### 清空指定机器人的预警记录
```go
ctx := context.Background()
robotId := int64(1) // 机器人ID
err := service.ToogoRobot().ClearSignalLogs(ctx, robotId, false)
if err != nil {
    log.Printf("清空失败: %v", err)
}
```

#### 只删除未执行的预警记录
```go
ctx := context.Background()
err := service.ToogoRobot().ClearSignalLogs(ctx, 0, true)
if err != nil {
    log.Printf("清空失败: %v", err)
}
```

---

## 推荐方式

**推荐使用方法1（SQL）**，因为：
- 简单直接
- 不需要编译代码
- 可以精确控制删除条件
- 执行速度快

**使用方法2（代码函数）**适用于：
- 需要在代码中动态清空
- 需要记录日志
- 需要权限控制

---

## 注意事项

⚠️ **警告**：清空预警记录是不可逆操作，请谨慎使用！

1. **备份数据**：清空前建议先备份数据库
2. **确认条件**：确认删除条件是否正确
3. **测试环境**：建议先在测试环境验证

