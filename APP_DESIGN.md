### App 产品设计稿（基于 hotgo_v2：GoFrame2 + Vue3 + naive-admin-plus + uniapp）

#### 背景与目标
- **目标**：基于现有 hotgo_v2 的“量化交易/机器人/策略模板/钱包算力/订阅/团队”能力，设计一款面向移动端的 App（uniapp），用于用户**快速创建/管理机器人、查看行情与收益、接收风控通知、完成充值/订阅/算力购买**。
- **原则**：
  - **高频只读 + 低频操作**：移动端以“查看/监控/通知”为主，涉及风险的“改策略/改参数/批量操作”尽量引导到 Web 管理台或二次确认。
  - **弱依赖交易所差异**：交易所差异（bitget/binance/okx/gate）尽量在后端统一接口层消化，App 只展示统一字段与口径。
  - **权限驱动菜单**：沿用现有“用户菜单/角色权限”模型，App 的页面可见性与操作权限全部由后端下发。

---

### 目标用户与使用场景

#### 角色
- **普通用户**：订阅策略、创建机器人、绑定交易所 API、查看收益与持仓、接收预警与自动交易状态。
- **VIP/代理用户**：额外有团队/佣金/分润报表、专属策略订阅等。
- **管理员（可选 App 端）**：移动端仅保留关键运营看板与告警处理，完整管理仍在 Web 后台。

#### Top 场景
- **S1**：新用户 3 分钟完成“注册 → 绑定交易所 API → 复制官方策略 → 启动机器人”
- **S2**：随时查看机器人状态（信号、持仓、止损/止盈血条、账户权益/余额）
- **S3**：异常/风控通知（断线、余额不足、触发止损、交易所限流、API 失效）
- **S4**：充值与购买（USDT 充值、算力购买、订阅续费）

---

### 信息架构（App Tab 设计）

建议 5 Tab（符合主流交易 App 习惯）：
- **首页**：总览 + 快捷入口
- **机器人**：机器人列表/详情/操作
- **策略**：官方策略/我的策略/订阅/排行
- **钱包**：资产、算力、账单、充值/提现
- **我的**：账号、KYC/安全、API配置、团队/佣金、设置

> 若希望更简洁，可合并“策略/机器人”为一个 Tab，但会牺牲清晰度。

---

### 页面清单（按模块）

#### 1) 首页（Home）
- **首页总览**
  - 今日/累计收益、运行机器人数量、已用保证金、可用余额、算力余额
  - 风险提示卡片：API 失效、余额不足、断线、限流
  - 快捷入口：创建机器人、绑定 API、复制官方策略、充值、算力购买
- **行情卡片（轻量）**
  - 自选列表（BTC/ETH/主流）
  - 24h 涨跌、最新价、波动状态（trend/volatile/high_vol/low_vol）

#### 2) 机器人（Robots）
- **机器人列表**
  - 卡片字段：机器人名、交易所、交易对、状态（运行/暂停/停止）、最近信号、收益、持仓数
  - 列表筛选：运行中/全部；交易对；交易所
  - 操作：启动/暂停/停止（均需要二次确认）
- **机器人详情（核心页）**
  - 顶部：交易对 + 当前价 + 市场状态 + 风险偏好
  - 账户：账户权益/钱包余额/可用余额（统一口径）
  - 信号：方向、强度、置信度、原因（与 Web 一致）
  - 持仓列表：多/空分别展示（双向持仓），展示：
    - 数量、开仓价、标记价、未实现盈亏
    - 止损血条（基于保证金×止损%）
    - 启动止盈血条（盈利/保证金 达到阈值）
    - 止盈回撤血条（maxProfitReached 回撤）
    - 最高盈利（maxProfitReached）
  - 订单/历史：近 N 条交易、状态同步情况
  - 快捷开关：
    - 全自动下单（AutoTrade）
    - 全自动平仓（AutoClose）
    - 双向持仓（DualSidePosition）【只读展示 + 引导 Web 修改或强二次确认】
- **创建机器人（向导）**
  - Step1：选择交易所 API（已验证/未验证）
  - Step2：选择策略来源：官方/我的/订阅
  - Step3：风险偏好与市场状态：自动/手动（默认自动）
  - Step4：资金风控：最大亏损、最大盈利目标、运行时长、定时启停
  - Step5：确认启动

#### 3) 策略（Strategies）
- **官方策略**
  - 官方策略组列表（12 套策略矩阵）
  - 详情：市场状态×风险偏好矩阵、预估收益、参数解释
  - 操作：复制到“我的策略”（生成副本，可编辑）
- **我的策略**
  - 策略组列表
  - 策略模板列表（12 套），支持轻量编辑（关键参数）+ 提示“影响机器人”
- **订阅与排行**
  - 订阅计划、订阅权益、到期提醒
  - 策略排行：收益/稳定性/回撤（展示口径需后端统一）

#### 4) 钱包（Wallet）
- **资产总览**
  - USDT 余额、可用余额、冻结、近 7 天变动
- **算力中心**
  - 可用算力、消耗记录、购买入口（与现有 power/consume 逻辑对齐）
- **账单与记录**
  - 充值、提现、交易消耗、算力扣减

#### 5) 我的（Me）
- 账号与安全：登录设备、修改密码、二次验证（可选）
- API 配置管理：新增/编辑/验证/删除（引导强校验）
- 团队/佣金（如果开启）：代理等级、邀请、分润报表
- 系统设置：语言、主题、通知开关、隐私

---

### 权限与菜单下发（与现有系统对齐）
- App 侧路由与按钮权限都由后端的“菜单 + 权限码”控制：
  - **页面级**：是否展示 Tab/入口
  - **操作级**：是否允许启动/停止、是否允许编辑策略、是否允许复制官方策略
- 建议将 App 菜单定义为 Web 菜单的一个子集，并支持后端按端类型（web/app）返回不同菜单树。

---

### 数据刷新与实时性策略（解决“闪烁/0.00”类问题）
- **强烈建议**：App 端采用“**WS 优先 + HTTP 兜底**”的统一数据层。
- **防闪烁策略（统一规范）**：
  - 持仓/账户等关键数据：采用“连续 N 次为空才清空”的防抖策略（Web 已实践）。
  - 盈亏/血条：原地更新对象字段，避免替换数组触发整表重渲染。
  - 账户权益/钱包余额：若后端缓存未就绪，App 显示 `--` 而不是 `0.00`，并提示“数据同步中”。

---

### 通知体系（App 必须）
- **推送/站内信**：推荐使用统一消息中心（servmsg）：
  - 机器人断线、API 失效、余额不足、触发止损/止盈、限流、异常重连
- **通知分级**：
  - P0（强弹窗）：触发止损、API 失效导致停止交易
  - P1（通知栏）：断线重连、成交通知
  - P2（消息中心）：策略更新、订阅到期

---

### 技术落地建议（uniapp）

#### 客户端结构
- `pages/`：按 Tab 分包（分包加载提升首屏）
- `services/`：API 请求封装（token、重试、错误码统一）
- `stores/`：Pinia（推荐）或 Vuex，保存：
  - user、menu、permissions
  - robots（列表/详情缓存）
  - realtime（WS 数据）
- `components/`：复用卡片（RobotCard、PositionRow、SignalBadge、RiskBar）

#### 与 Web/后端对齐点
- 路由与菜单：复用现有菜单 key，App 端只渲染允许的部分
- 接口：优先复用已有 `/admin/...` 或 `api/...` 体系（建议另开 `app` 端前缀，便于鉴权与字段裁剪）

---

### 里程碑（建议）
- **M1（1-2 周）**：登录/菜单/首页总览/机器人列表&详情（只读）+ 只读联调工具跑通
- **M2（2-4 周）**：创建机器人向导 + API 配置管理 + 钱包/算力基础
- **M3（4-6 周）**：策略（官方/我的/复制）+ 订阅 + 通知中心
- **M4（6-8 周）**：深度运营（团队/佣金）、体验优化（性能/闪烁/离线）、灰度发布

---

### 你确认后我可以继续做的“下一步交付物”
- 输出 App 的**页面原型结构（导航/页面字段/按钮权限）**与**接口清单（字段口径）**
- 给出 uniapp 的**目录骨架与基础路由/鉴权/菜单渲染代码模板**（可以直接开始开发）











