# æœåŠ¡å¯åŠ¨é—®é¢˜æ’æŸ¥

## ğŸ” é—®é¢˜

æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œé€€å‡ºç ä¸º2ï¼Œæ­£åœ¨è‡ªåŠ¨é‡å¯ã€‚

## âœ… æ’æŸ¥æ­¥éª¤

### æ­¥éª¤1ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# æŸ¥çœ‹systemdæ—¥å¿—ï¼ˆæœ€é‡è¦ï¼‰
sudo journalctl -u toogo -n 50 --no-pager

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo journalctl -u toogo -f

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
sudo journalctl -u toogo -xe
```

### æ­¥éª¤2ï¼šæ£€æŸ¥åº”ç”¨æ—¥å¿—

```bash
# æ£€æŸ¥åº”ç”¨æ—¥å¿—ç›®å½•
ls -la /opt/toogo/toogo_v2/server/logs/

# æŸ¥çœ‹æœ€æ–°çš„é”™è¯¯æ—¥å¿—
tail -50 /opt/toogo/toogo_v2/server/logs/server/error/*.log

# æˆ–æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
find /opt/toogo/toogo_v2/server/logs -name "*.log" -type f -exec tail -20 {} \;
```

### æ­¥éª¤3ï¼šæ‰‹åŠ¨è¿è¡Œåº”ç”¨æµ‹è¯•

```bash
# åˆ‡æ¢åˆ°toogoç”¨æˆ·
su - toogo

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/toogo/toogo_v2/server

# æ‰‹åŠ¨è¿è¡Œåº”ç”¨ï¼ˆæŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼‰
./main http

# æˆ–ä½¿ç”¨è¯¦ç»†æ¨¡å¼
./main http --debug
```

### æ­¥éª¤4ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶

```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /opt/toogo/toogo_v2/server/manifest/config/config.yaml

# æ£€æŸ¥é…ç½®æ–‡ä»¶å†…å®¹ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰
cat /opt/toogo/toogo_v2/server/manifest/config/config.yaml | grep -A 10 "database:"
cat /opt/toogo/toogo_v2/server/manifest/config/config.yaml | grep -A 5 "redis:"
```

### æ­¥éª¤5ï¼šæ£€æŸ¥æ•°æ®åº“å’ŒRedisè¿æ¥

```bash
# æµ‹è¯•PostgreSQLè¿æ¥
PGPASSWORD='Toogo2027!@#$888' psql -h 127.0.0.1 -U hotgo_user -d hotgo -c "SELECT 1;"

# æµ‹è¯•Redisè¿æ¥
redis-cli -a 'Redis2027!@#$888' PING
```

### æ­¥éª¤6ï¼šæ£€æŸ¥ç«¯å£å ç”¨

```bash
# æ£€æŸ¥8000ç«¯å£æ˜¯å¦è¢«å ç”¨
sudo ss -tulnp | grep 8000
sudo lsof -i :8000
```

### æ­¥éª¤7ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™

```bash
# æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶æƒé™
ls -la /opt/toogo/toogo_v2/server/main

# æ£€æŸ¥é…ç½®æ–‡ä»¶æƒé™
ls -la /opt/toogo/toogo_v2/server/manifest/config/config.yaml

# æ£€æŸ¥æ—¥å¿—ç›®å½•æƒé™
ls -ld /opt/toogo/toogo_v2/server/logs
```

---

## ğŸ”§ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š** `config file not found` æˆ– `yaml parse error`

**è§£å†³æ–¹æ³•ï¼š**
```bash
cd /opt/toogo/toogo_v2/server
cp manifest/config/config.example.yaml manifest/config/config.yaml
vim manifest/config/config.yaml
# æ£€æŸ¥å¹¶ä¿®æ”¹æ•°æ®åº“å’ŒRedisé…ç½®
```

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `database connection failed` æˆ– `dial tcp`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œ
sudo systemctl status postgresql

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
sudo -u postgres psql -l | grep hotgo

# æ£€æŸ¥ç”¨æˆ·å’Œå¯†ç 
sudo -u postgres psql -c "\du" | grep hotgo_user

# å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ›å»º
sudo -u postgres psql <<EOF
CREATE DATABASE hotgo;
CREATE USER hotgo_user WITH PASSWORD 'Toogo2027!@#$888';
GRANT ALL PRIVILEGES ON DATABASE hotgo TO hotgo_user;
\q
EOF
```

### é—®é¢˜3ï¼šRedisè¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `redis connection failed` æˆ– `NOAUTH`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥Redisæ˜¯å¦è¿è¡Œ
sudo systemctl status redis-server

# æµ‹è¯•Redisè¿æ¥
redis-cli -a 'Redis2027!@#$888' PING

# æ£€æŸ¥Redisé…ç½®
sudo cat /etc/redis/redis.conf | grep requirepass
```

### é—®é¢˜4ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯ï¼š** `address already in use` æˆ– `bind: address already in use`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æŸ¥æ‰¾å ç”¨8000ç«¯å£çš„è¿›ç¨‹
sudo lsof -i :8000
sudo ss -tulnp | grep 8000

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo kill -9 <PID>

# æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
vim /opt/toogo/toogo_v2/server/manifest/config/config.yaml
# ä¿®æ”¹ server.address ä¸ºå…¶ä»–ç«¯å£ï¼Œå¦‚ ":8001"
```

### é—®é¢˜5ï¼šæƒé™é—®é¢˜

**é”™è¯¯ä¿¡æ¯ï¼š** `permission denied`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# ç¡®ä¿toogoç”¨æˆ·æœ‰æƒé™
sudo chown -R toogo:toogo /opt/toogo/toogo_v2
sudo chmod +x /opt/toogo/toogo_v2/server/main

# ç¡®ä¿æ—¥å¿—ç›®å½•å¯å†™
sudo mkdir -p /opt/toogo/toogo_v2/server/logs
sudo chown -R toogo:toogo /opt/toogo/toogo_v2/server/logs
```

### é—®é¢˜6ï¼šç¼ºå°‘ä¾èµ–æˆ–ç¼–è¯‘é—®é¢˜

**é”™è¯¯ä¿¡æ¯ï¼š** `exec format error` æˆ– `cannot execute binary file`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# é‡æ–°ç¼–è¯‘
cd /opt/toogo/toogo_v2/server
go build -o main main.go

# æ£€æŸ¥æ–‡ä»¶ç±»å‹
file main
# åº”è¯¥æ˜¾ç¤º: ELF 64-bit LSB executable

# æ£€æŸ¥æ¶æ„
uname -m
# åº”è¯¥åŒ¹é…ç¼–è¯‘çš„æ¶æ„
```

---

## ğŸš€ å¿«é€Ÿæ’æŸ¥å‘½ä»¤

```bash
# === 1. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿— ===
sudo journalctl -u toogo -n 100 --no-pager

# === 2. æ‰‹åŠ¨è¿è¡ŒæŸ¥çœ‹é”™è¯¯ ===
cd /opt/toogo/toogo_v2/server
./main http

# === 3. æ£€æŸ¥é…ç½®æ–‡ä»¶ ===
cat manifest/config/config.yaml | grep -A 10 database
cat manifest/config/config.yaml | grep -A 5 redis

# === 4. æµ‹è¯•æ•°æ®åº“è¿æ¥ ===
PGPASSWORD='Toogo2027!@#$888' psql -h 127.0.0.1 -U hotgo_user -d hotgo -c "SELECT 1;"

# === 5. æµ‹è¯•Redisè¿æ¥ ===
redis-cli -a 'Redis2027!@#$888' PING

# === 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€ ===
sudo systemctl status toogo
sudo systemctl status postgresql
sudo systemctl status redis-server
```

---

## ğŸ“‹ ä¿®å¤åé‡å¯æœåŠ¡

```bash
# ä¿®å¤é—®é¢˜åï¼Œé‡å¯æœåŠ¡
sudo systemctl restart toogo

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status toogo

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u toogo -f
```

---

## ğŸ¯ æ¨èæ’æŸ¥é¡ºåº

1. **æŸ¥çœ‹systemdæ—¥å¿—** - æœ€ç›´æ¥çœ‹åˆ°é”™è¯¯ä¿¡æ¯
2. **æ‰‹åŠ¨è¿è¡Œåº”ç”¨** - çœ‹åˆ°å®æ—¶é”™è¯¯è¾“å‡º
3. **æ£€æŸ¥é…ç½®æ–‡ä»¶** - ç¡®ä¿é…ç½®æ­£ç¡®
4. **æµ‹è¯•æ•°æ®åº“å’ŒRedis** - ç¡®ä¿è¿æ¥æ­£å¸¸
5. **æ£€æŸ¥æƒé™å’Œç«¯å£** - æ’é™¤ç¯å¢ƒé—®é¢˜

---

**å…ˆæ‰§è¡Œç¬¬ä¸€æ­¥æŸ¥çœ‹æ—¥å¿—ï¼Œæ‰¾å‡ºå…·ä½“é”™è¯¯ä¿¡æ¯ï¼** ğŸ”
