# 修复目录问题 - 代码位置检查

## 🔍 问题

代码可能克隆到了 `/root/toogo_v2` 而不是 `/opt/toogo/toogo_v2`

## ✅ 解决方案

### 步骤1：检查代码实际位置

```bash
# 检查当前目录下的toogo_v2
ls -la /root/toogo_v2

# 或检查所有位置
find / -name "toogo_v2" -type d 2>/dev/null
```

### 步骤2：创建正确的目录结构

```bash
# 创建项目目录
mkdir -p /opt/toogo

# 移动代码到正确位置
mv /root/toogo_v2 /opt/toogo/

# 或如果代码在其他位置，先找到再移动
# mv /path/to/toogo_v2 /opt/toogo/
```

### 步骤3：设置权限

```bash
# 设置目录权限
chown -R toogo:toogo /opt/toogo/toogo_v2
chmod -R 755 /opt/toogo/toogo_v2
```

### 步骤4：复制部署脚本

```bash
# 复制部署脚本到项目目录
cp /root/部署脚本-新加坡服务器.sh /opt/toogo/toogo_v2/
chown toogo:toogo /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh
chmod +x /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh
```

---

## 🚀 快速修复命令

```bash
# === 在root用户下执行 ===

# 1. 检查代码位置
ls -la /root/toogo_v2

# 2. 创建目录（如果不存在）
mkdir -p /opt/toogo

# 3. 移动代码到正确位置
mv /root/toogo_v2 /opt/toogo/

# 4. 设置权限
chown -R toogo:toogo /opt/toogo/toogo_v2

# 5. 复制部署脚本
cp /root/部署脚本-新加坡服务器.sh /opt/toogo/toogo_v2/
chown toogo:toogo /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh
chmod +x /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh

# 6. 验证
ls -la /opt/toogo/toogo_v2

# 7. 切换到toogo用户
su - toogo
# 密码: Singapore2027!@#

# 8. 进入项目目录
cd /opt/toogo/toogo_v2

# 9. 运行部署脚本
bash 部署脚本-新加坡服务器.sh
```

---

## 🔍 如果代码不在/root目录

### 查找代码位置

```bash
# 查找toogo_v2目录
find / -name "toogo_v2" -type d 2>/dev/null

# 查找.git目录（Git仓库）
find / -name ".git" -type d -path "*/toogo_v2/.git" 2>/dev/null
```

### 找到后移动

```bash
# 假设代码在 /path/to/toogo_v2
mv /path/to/toogo_v2 /opt/toogo/
chown -R toogo:toogo /opt/toogo/toogo_v2
```

---

## 📋 完整操作流程

```bash
# === 步骤1: 检查代码位置 ===
ls -la /root/ | grep toogo

# === 步骤2: 创建目录并移动代码 ===
mkdir -p /opt/toogo
mv /root/toogo_v2 /opt/toogo/

# === 步骤3: 设置权限 ===
chown -R toogo:toogo /opt/toogo/toogo_v2

# === 步骤4: 复制部署脚本 ===
cp /root/部署脚本-新加坡服务器.sh /opt/toogo/toogo_v2/
chown toogo:toogo /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh
chmod +x /opt/toogo/toogo_v2/部署脚本-新加坡服务器.sh

# === 步骤5: 添加toogo到sudo组 ===
usermod -aG sudo toogo

# === 步骤6: 切换到toogo用户 ===
su - toogo
# 密码: Singapore2027!@#

# === 步骤7: 进入项目目录 ===
cd /opt/toogo/toogo_v2

# === 步骤8: 运行部署脚本 ===
bash 部署脚本-新加坡服务器.sh
```

---

## ⚠️ 注意事项

1. **如果代码已经克隆到其他位置**
   - 先找到代码位置：`find / -name "toogo_v2" -type d`
   - 然后移动到正确位置

2. **如果不想移动代码**
   - 可以修改部署脚本中的 `PROJECT_DIR` 变量
   - 或直接在代码所在位置运行脚本

3. **权限问题**
   - 确保toogo用户有读写权限
   - 确保toogo用户在sudo组中

---

**按照这些步骤操作，应该可以解决问题！** 🎉
