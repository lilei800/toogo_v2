# HotGo_v2 å¿«é€Ÿéƒ¨ç½²å‚è€ƒå¡

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥ï¼‰

### æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨
scp ä¸€é”®éƒ¨ç½²è„šæœ¬.sh ä½ çš„ç”¨æˆ·å@æœåŠ¡å™¨IP:~/

# 2. SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh ä½ çš„ç”¨æˆ·å@æœåŠ¡å™¨IP

# 3. è¿è¡Œè„šæœ¬
bash ä¸€é”®éƒ¨ç½²è„šæœ¬.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨éƒ¨ç½²ï¼ˆæŒ‰æ­¥éª¤æ‰§è¡Œï¼‰

```bash
# ç¬¬ä¸€æ­¥ï¼šç³»ç»Ÿåˆå§‹åŒ–
sudo apt update && sudo apt upgrade -y
sudo apt install -y curl wget git vim build-essential
sudo timedatectl set-timezone Asia/Shanghai
sudo ufw allow 22,80,443/tcp && sudo ufw enable

# ç¬¬äºŒæ­¥ï¼šå®‰è£…Go
cd /tmp && wget https://go.dev/dl/go1.24.4.linux-amd64.tar.gz
sudo rm -rf /usr/local/go && sudo tar -C /usr/local -xzf go1.24.4.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' | sudo tee -a /etc/profile
source /etc/profile && go version

# ç¬¬ä¸‰æ­¥ï¼šå®‰è£…PostgreSQL
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt update && sudo apt install -y postgresql-14
sudo systemctl start postgresql && sudo systemctl enable postgresql

# ç¬¬å››æ­¥ï¼šåˆ›å»ºæ•°æ®åº“
sudo -u postgres psql <<EOF
CREATE DATABASE hotgo;
CREATE USER hotgo_user WITH PASSWORD 'HotGo2024!@#$';
GRANT ALL PRIVILEGES ON DATABASE hotgo TO hotgo_user;
\q
EOF

# ç¬¬äº”æ­¥ï¼šå®‰è£…Redis
sudo apt install -y redis-server
sudo sed -i 's/# requirepass.*/requirepass Redis2024!@#$/' /etc/redis/redis.conf
sudo systemctl restart redis-server && sudo systemctl enable redis-server

# ç¬¬å…­æ­¥ï¼šå®‰è£…Nginx
sudo apt install -y nginx
sudo systemctl start nginx && sudo systemctl enable nginx

# ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²ä»£ç 
sudo mkdir -p /opt/hotgo && sudo chown -R $USER:$USER /opt/hotgo
cd /opt/hotgo
# ä¸Šä¼ ä»£ç åˆ°è¿™é‡Œï¼Œç„¶åï¼š
cd hotgo_v2/server
go mod download
cp manifest/config/config.example.yaml manifest/config/config.yaml
# ç¼–è¾‘config.yamlï¼Œä¿®æ”¹æ•°æ®åº“å’ŒRediså¯†ç 
go build -o main main.go

# ç¬¬å…«æ­¥ï¼šé…ç½®æœåŠ¡
# åˆ›å»º /etc/systemd/system/hotgo.serviceï¼ˆå‚è€ƒéƒ¨ç½²æŒ‡å—ï¼‰
sudo systemctl daemon-reload
sudo systemctl enable hotgo && sudo systemctl start hotgo

# ç¬¬ä¹æ­¥ï¼šé…ç½®Nginxï¼ˆå‚è€ƒéƒ¨ç½²æŒ‡å—ï¼‰
sudo systemctl restart nginx
```

---

## ğŸ“‹ å¿…é¡»å®‰è£…çš„è½¯ä»¶æ¸…å•

- âœ… Go 1.24+
- âœ… PostgreSQL 14+
- âœ… Redis 7+
- âœ… Nginx

---

## ğŸ”‘ é»˜è®¤å¯†ç ï¼ˆè¯·ä¿®æ”¹ï¼ï¼‰

- **PostgreSQLå¯†ç **: `HotGo2024!@#$`
- **Rediså¯†ç **: `Redis2024!@#$`

---

## ğŸ“ é‡è¦ç›®å½•

- **é¡¹ç›®ç›®å½•**: `/opt/hotgo/hotgo_v2`
- **é…ç½®æ–‡ä»¶**: `/opt/hotgo/hotgo_v2/server/manifest/config/config.yaml`
- **æ—¥å¿—ç›®å½•**: `/opt/hotgo/hotgo_v2/server/logs`

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# æœåŠ¡ç®¡ç†
sudo systemctl status hotgo      # æŸ¥çœ‹çŠ¶æ€
sudo systemctl restart hotgo     # é‡å¯æœåŠ¡
sudo journalctl -u hotgo -f      # æŸ¥çœ‹æ—¥å¿—

# æ•°æ®åº“
psql -h 127.0.0.1 -U hotgo_user -d hotgo  # è¿æ¥æ•°æ®åº“
PGPASSWORD='å¯†ç ' pg_dump -h 127.0.0.1 -U hotgo_user hotgo > backup.sql  # å¤‡ä»½

# Nginx
sudo nginx -t                    # æµ‹è¯•é…ç½®
sudo systemctl restart nginx     # é‡å¯Nginx
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

```bash
# 1. æ£€æŸ¥æ‰€æœ‰æœåŠ¡
sudo systemctl status hotgo postgresql redis-server nginx

# 2. æµ‹è¯•API
curl http://localhost:8000/api/health

# 3. è®¿é—®Webç•Œé¢
# æµè§ˆå™¨æ‰“å¼€: http://ä½ çš„æœåŠ¡å™¨IP
```

---

## ğŸ› å¸¸è§é—®é¢˜

### æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
sudo journalctl -u hotgo -xe  # æŸ¥çœ‹è¯¦ç»†é”™è¯¯
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
cat /opt/hotgo/hotgo_v2/server/manifest/config/config.yaml | grep -A 5 database
```

### Nginx 502é”™è¯¯
```bash
# æ£€æŸ¥åç«¯æœåŠ¡
sudo systemctl status hotgo
curl http://localhost:8000/api/health
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹: `éƒ¨ç½²æŒ‡å—-å°ç™½ç‰ˆ.md`
