# æœåŠ¡å™¨éƒ¨ç½²åç»­æ­¥éª¤

## âœ… å·²å®Œæˆ

- âœ… ä»£ç å·²æˆåŠŸå…‹éš†åˆ°æœåŠ¡å™¨ï¼š`/opt/toogo/toogo_v2`
- âœ… å…‹éš†äº† 15484 ä¸ªå¯¹è±¡ï¼Œ44.64 MB

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### æ­¥éª¤1ï¼šè¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd /opt/toogo/toogo_v2
ls -la
```

åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- `server/` - åç«¯ä»£ç ç›®å½•
- `web/` - å‰ç«¯ä»£ç ç›®å½•
- `éƒ¨ç½²è„šæœ¬-æ–°åŠ å¡æœåŠ¡å™¨.sh` - éƒ¨ç½²è„šæœ¬
- å…¶ä»–æ–‡ä»¶å’Œç›®å½•

### æ­¥éª¤2ï¼šæ£€æŸ¥é¡¹ç›®ç»“æ„

```bash
# æŸ¥çœ‹é¡¹ç›®ç»“æ„
cd /opt/toogo/toogo_v2
ls -la

# æŸ¥çœ‹serverç›®å½•
ls -la server/

# æŸ¥çœ‹æ˜¯å¦æœ‰éƒ¨ç½²è„šæœ¬
ls -la *.sh
```

### æ­¥éª¤3ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

æ ¹æ®ä½ çš„éƒ¨ç½²è„šæœ¬ï¼Œæ‰§è¡Œï¼š

```bash
cd /opt/toogo/toogo_v2

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x éƒ¨ç½²è„šæœ¬-æ–°åŠ å¡æœåŠ¡å™¨.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
bash éƒ¨ç½²è„šæœ¬-æ–°åŠ å¡æœåŠ¡å™¨.sh
```

**æ³¨æ„ï¼š** å¦‚æœè„šæœ¬ä¸åœ¨æ ¹ç›®å½•ï¼Œå¯èƒ½éœ€è¦å…ˆä¸Šä¼ æˆ–æ£€æŸ¥è„šæœ¬ä½ç½®ã€‚

---

## ğŸ“‹ å¦‚æœæ²¡æœ‰éƒ¨ç½²è„šæœ¬ï¼Œæ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### 1. æ£€æŸ¥Goç¯å¢ƒ

```bash
go version
# åº”è¯¥æ˜¾ç¤º: go version go1.24.x æˆ–æ›´é«˜ç‰ˆæœ¬
```

å¦‚æœæ²¡æœ‰å®‰è£…Goï¼Œéœ€è¦å…ˆå®‰è£…ï¼ˆå‚è€ƒéƒ¨ç½²è„šæœ¬æˆ–éƒ¨ç½²æŒ‡å—ï¼‰ã€‚

### 2. æ£€æŸ¥PostgreSQLå’ŒRedis

```bash
# æ£€æŸ¥PostgreSQL
sudo systemctl status postgresql

# æ£€æŸ¥Redis
sudo systemctl status redis-server
```

### 3. è¿›å…¥serverç›®å½•

```bash
cd /opt/toogo/toogo_v2/server
```

### 4. å®‰è£…Goä¾èµ–

```bash
go mod download
go mod verify
```

### 5. é…ç½®åº”ç”¨

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp manifest/config/config.example.yaml manifest/config/config.yaml

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim manifest/config/config.yaml
```

**å…³é”®é…ç½®ï¼š**
- æ•°æ®åº“å¯†ç ï¼š`Toogo2027!@#$888`
- Rediså¯†ç ï¼š`Redis2027!@#$888`
- æœåŠ¡å™¨åœ°å€ï¼š`127.0.0.1:8000`

### 6. åˆå§‹åŒ–æ•°æ®åº“

```bash
# å¯¼å…¥æ•°æ®åº“ç»“æ„
PGPASSWORD='Toogo2027!@#$888' psql -h 127.0.0.1 -U hotgo_user -d hotgo -f storage/data/hotgo-pg.sql
```

### 7. ç¼–è¯‘åº”ç”¨

```bash
go build -o main main.go
chmod +x main
```

### 8. é…ç½®SystemdæœåŠ¡

åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š

```bash
sudo vim /etc/systemd/system/toogo.service
```

æœåŠ¡æ–‡ä»¶å†…å®¹ï¼š

```ini
[Unit]
Description=Toogo Trading System
After=network.target postgresql.service redis.service
Wants=postgresql.service redis.service

[Service]
Type=simple
User=root
Group=root
WorkingDirectory=/opt/toogo/toogo_v2/server

ExecStart=/opt/toogo/toogo_v2/server/main http
ExecReload=/bin/kill -HUP $MAINPID

KillMode=mixed
KillSignal=SIGTERM
TimeoutStopSec=30
Restart=on-failure
RestartSec=5s

Environment="GF_GCFG_PATH=/opt/toogo/toogo_v2/server/manifest/config"
Environment="GF_GLOG_PATH=/opt/toogo/toogo_v2/server/logs"

LimitNOFILE=65536
LimitNPROC=4096

StandardOutput=journal
StandardError=journal
SyslogIdentifier=toogo

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable toogo
sudo systemctl start toogo
sudo systemctl status toogo
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

### æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡
sudo systemctl status toogo
sudo systemctl status postgresql
sudo systemctl status redis-server
sudo systemctl status nginx
```

### æ£€æŸ¥æ—¥å¿—

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo journalctl -u toogo -f

# æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
sudo journalctl -u toogo -n 100
```

### æµ‹è¯•API

```bash
# æµ‹è¯•æœ¬åœ°API
curl http://localhost:8000/api/health

# æµ‹è¯•é€šè¿‡Nginxè®¿é—®ï¼ˆå¦‚æœå·²é…ç½®ï¼‰
curl http://localhost/admin/api/health
```

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/toogo/toogo_v2

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls -la

# è¿›å…¥serverç›®å½•
cd server

# å®‰è£…ä¾èµ–
go mod download

# ç¼–è¯‘
go build -o main main.go

# æµ‹è¯•è¿è¡Œ
./main http

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status toogo

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u toogo -f
```

---

## ğŸ”„ æ›´æ–°ä»£ç ï¼ˆåç»­ï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/toogo/toogo_v2

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°ç¼–è¯‘
cd server
go build -o main main.go

# é‡å¯æœåŠ¡
sudo systemctl restart toogo

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
sudo journalctl -u toogo -f
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

1. **è¿›å…¥é¡¹ç›®ç›®å½•**
   ```bash
   cd /opt/toogo/toogo_v2
   ```

2. **æ£€æŸ¥é¡¹ç›®æ–‡ä»¶**
   ```bash
   ls -la
   ```

3. **è¿è¡Œéƒ¨ç½²è„šæœ¬æˆ–æ‰‹åŠ¨éƒ¨ç½²**
   - å¦‚æœæœ‰ `éƒ¨ç½²è„šæœ¬-æ–°åŠ å¡æœåŠ¡å™¨.sh`ï¼Œè¿è¡Œå®ƒ
   - å¦‚æœæ²¡æœ‰ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤æ“ä½œ

4. **é…ç½®å’Œå¯åŠ¨æœåŠ¡**
   - é…ç½®æ•°æ®åº“å’ŒRedis
   - ç¼–è¯‘åº”ç”¨
   - å¯åŠ¨æœåŠ¡

---

**ä»£ç å·²æˆåŠŸå…‹éš†ï¼ç°åœ¨å¯ä»¥å¼€å§‹éƒ¨ç½²äº†ï¼** ğŸ‰
