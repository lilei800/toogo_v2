# HotGo_v2 项目清理说明

## 📋 可以安全删除的文件和目录

### ✅ 可以删除（推荐清理）

#### 1. **node_modules 目录**
- `web\web_backup_old\node_modules` - **可以删除**
  - 这是备份目录，不再需要
  - 删除后可以节省大量空间（通常几百MB到几GB）

- `web\node_modules` - **可以删除**
  - 这是前端依赖包，可以通过 `npm install` 重新安装
  - 删除后可以节省大量空间
  - **注意**：如果正在开发前端，删除后需要重新运行 `npm install`

#### 2. **日志文件**
- `server\logs\*` - **可以删除**
  - 所有 `.log` 文件
  - 日志文件会在运行时自动重新生成
  - 建议定期清理，避免占用过多空间

#### 3. **临时文件**
- `server\temp\*` - **可以删除**
  - 临时文件目录
  - 可以安全删除

#### 4. **缓存文件**
- `server\storage\cache\*` - **可以删除**
  - 应用缓存文件
  - 删除后会在运行时重新生成

#### 5. **编译生成的文件**
- `*.exe` - **可以删除**
  - Windows可执行文件
  - 可以通过 `go build` 重新编译

#### 6. **日志文件（根目录）**
- `*.log` - **可以删除**
  - 根目录下的日志文件
  - 可以安全删除

---

## 🚫 不要删除的文件和目录

### ⚠️ 重要：以下文件不要删除！

- `server\` - 后端代码（必须保留）
- `web\src\` - 前端源代码（必须保留）
- `server\manifest\` - 配置文件（必须保留）
- `server\storage\data\` - SQL数据文件（必须保留）
- `server\go.mod` 和 `server\go.sum` - Go依赖文件（必须保留）
- `web\package.json` - 前端依赖配置（必须保留）
- `.git\` - Git版本控制（如果使用Git）

---

## 🛠️ 清理方法

### 方法1：使用清理脚本（推荐）

```bash
# Windows
双击运行: 清理项目文件.bat

# 或者在命令行执行
清理项目文件.bat
```

### 方法2：手动清理

#### 清理 node_modules

```powershell
# Windows PowerShell
Remove-Item -Recurse -Force "web\web_backup_old\node_modules"
Remove-Item -Recurse -Force "web\node_modules"
```

#### 清理日志文件

```powershell
# 清理server日志
Remove-Item -Recurse -Force "server\logs\*"

# 清理根目录日志
Get-ChildItem -Recurse -Filter "*.log" | Remove-Item -Force
```

#### 清理临时和缓存文件

```powershell
# 清理临时文件
Remove-Item -Recurse -Force "server\temp\*"

# 清理缓存
Remove-Item -Recurse -Force "server\storage\cache\*"
```

#### 清理可执行文件

```powershell
# 清理所有.exe文件
Get-ChildItem -Recurse -Filter "*.exe" | Remove-Item -Force
```

---

## 📊 清理效果预估

### 典型项目大小

| 项目 | 大小 | 可清理 |
|------|------|--------|
| `web\node_modules` | 100-500 MB | ✅ 是 |
| `web_backup_old\node_modules` | 100-500 MB | ✅ 是 |
| `server\logs\*` | 10-100 MB | ✅ 是 |
| `server\temp\*` | 1-10 MB | ✅ 是 |
| `server\storage\cache\*` | 1-50 MB | ✅ 是 |
| `*.exe` | 10-50 MB | ✅ 是 |

**总计可节省空间：约 200MB - 1GB+**

---

## 🔄 清理后需要做的操作

### 1. 如果需要前端开发

```bash
cd web
npm install
```

### 2. 如果需要编译后端

```bash
cd server
go build -o main.exe main.go
```

### 3. 日志会自动重新生成

运行时日志文件会自动创建，无需手动操作。

---

## 📝 清理脚本说明

已创建 `清理项目文件.bat` 脚本，功能包括：

1. ✅ 清理备份目录的 node_modules
2. ✅ 清理当前 web 目录的 node_modules
3. ✅ 清理所有日志文件
4. ✅ 清理临时文件
5. ✅ 清理缓存文件
6. ✅ 清理可执行文件
7. ✅ 清理根目录日志文件

**使用方法：**
- 双击运行脚本
- 按提示确认清理
- 脚本会显示清理进度

---

## ⚠️ 注意事项

1. **备份重要数据**
   - 清理前确保重要数据已备份
   - 特别是配置文件和数据文件

2. **停止运行中的服务**
   - 如果服务正在运行，建议先停止
   - 避免文件被占用导致删除失败

3. **node_modules 可以重新安装**
   - 删除后可以通过 `npm install` 重新安装
   - 确保 `package.json` 文件存在

4. **日志文件会自动生成**
   - 删除日志文件不会影响程序运行
   - 程序运行时会自动创建新的日志文件

---

## 🎯 推荐清理策略

### 开发环境

- ✅ 定期清理日志文件（每周）
- ✅ 清理备份目录的 node_modules
- ⚠️ 保留当前 web\node_modules（如果正在开发前端）

### 生产环境部署前

- ✅ 清理所有 node_modules（部署时重新安装）
- ✅ 清理所有日志文件
- ✅ 清理临时和缓存文件
- ✅ 清理可执行文件（服务器上重新编译）

### 版本控制

建议在 `.gitignore` 中添加：

```
# 依赖
node_modules/
web_backup_old/node_modules/

# 日志
*.log
server/logs/

# 临时文件
server/temp/
server/storage/cache/

# 编译文件
*.exe
server/main
server/hotgo
```

---

## 📞 常见问题

### Q1: 删除 node_modules 后如何恢复？

**A:** 运行 `npm install` 重新安装依赖

### Q2: 删除日志文件会影响程序吗？

**A:** 不会，日志文件会在运行时自动重新生成

### Q3: 清理后需要重启服务吗？

**A:** 如果清理了正在使用的文件，建议重启服务

### Q4: 可以删除 web_backup_old 整个目录吗？

**A:** 可以，如果确认不再需要备份的话

---

**最后更新**: 2025-01-07
